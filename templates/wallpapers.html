<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Wallpapers Gallery</title>
		<link rel="stylesheet" href="../static/dist/output.css" />
	</head>
	<body class="bg-base-200 min-h-screen p-2 sm:p-4">
		{% include '_navbar.html' %}
		<div class="max-w-5xl mx-auto">
			<h2 class="text-3xl font-bold text-primary mb-6 text-center">Wallpapers Gallery</h2>
			{% if wallpapers %}
			<!-- Responsive grid for wallpapers -->
			<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
				{% for wallpaper in wallpapers %}
				<div class="card bg-base-100 shadow-xl border border-base-300">
					<figure class="relative pt-[56.25%] cursor-pointer" onclick="showModal('{{ wallpaper.file_url }}')">
						<img src="{{ wallpaper.file_url }}" alt="Wallpaper" class="absolute inset-0 w-full h-full object-cover rounded-t-xl" />
					</figure>
					<div class="card-body p-4">
						<h3 class="card-title text-lg font-semibold">{{ wallpaper.filename }}</h3>
						<p class="text-xs opacity-60">Uploaded by: {{ wallpaper.user_id }}</p>
						<p class="text-xs opacity-60">{{ wallpaper.timestamp }}</p>
						<div class="flex items-center mt-2">
							<a href="{{ wallpaper.file_url }}" class="btn btn-primary btn-sm mr-2" download>Download</a>
							{% if is_admin or wallpaper.user_id == user_id %}
							<form method="post" action="/delete_note/{{ wallpaper.id }}" onsubmit="return confirm('Are you sure you want to delete this wallpaper?');">
								<button type="submit" class="btn btn-sm btn-error">
									<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
									</svg>
								</button>
							</form>
							{% endif %}
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
			{% else %}
			<div class="text-center text-lg opacity-60 mt-12">No wallpapers uploaded yet.</div>
			{% endif %}
		</div>
	</body>
</html>

<!-- Modal for full image view -->
<div id="wallpaperModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 hidden">
  <span class="absolute top-4 right-8 text-white text-3xl cursor-pointer" onclick="hideModal()">&times;</span>
  <img id="modalImg" src="" alt="Wallpaper" class="max-w-full max-h-[90vh] rounded-xl shadow-2xl border-4 border-white" />
</div>
<script>
function showModal(imgUrl) {
  document.getElementById('modalImg').src = imgUrl;
  document.getElementById('wallpaperModal').classList.remove('hidden');
}
function hideModal() {
  document.getElementById('wallpaperModal').classList.add('hidden');
  document.getElementById('modalImg').src = '';
}
</script>
</html>
